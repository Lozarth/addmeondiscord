<!DOCTYPE html>
<html>
    <head>
        <title>Add Lozarth on Discord</title>
    </head>
    <body>
        <h1 id='countdown'>Beaming profile to Discord in 5 seconds...</h1>

        <p id='manual'>Or press <a href='discord://-/users/339492485854396426'>here</a>.</p>

        <!-- Github Source footer -->
        <a id='source' href='https://github.com/Lozarth/addmeondiscord'>Website Source</a>

        <script>
            const countdown = document.getElementById('countdown')

            function closeCountdown() {
                let closeTime = 10
                const interval = setInterval(function() {
                    closeTime--

                    if (closeTime <= 0) {
                        clearInterval(interval)
                        window.close()
                    } else {
                        countdown.innerHTML = `Closing in ${closeTime} seconds...`
                    }
                }, 1000)
            }
            
            function redirectCountdown() {
                let redirectTime = 5
                const interval = setInterval(function() {
                    redirectTime--

                    if (redirectTime <= 0) {
                        window.location.href = 'discord://-/users/339492485854396426'
                        clearInterval(interval)
                        countdown.innerHTML = 'Closing in 10 seconds...'
                        closeCountdown()
                    } else {
                        countdown.innerHTML = `Beaming profile to Discord in ${redirectTime} seconds...`
                    }
                }, 1000)
            }

            redirectCountdown()
        </script>

        <style>
            /* Discord theme and font */
            body {
                background-color: #2f3136;
                color: #dcddde;
                font-family: 'Whitney', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            }

            /* Countdown */
            #countdown {
                font-size: 2em;
                text-align: center;
            }

            /* Manual link */
            #manual {
                text-align: center;
            }

            /* Github Source footer */
            #source {
                position: absolute;
                bottom: 0;
                right: 0;
                margin: 10px;
                color: #dcddde;
                text-decoration: none;
            }
        </style>
    </body>
</html>
